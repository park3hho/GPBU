# 5주차 1교시: 스케줄링과 스케줄링 시 고려사항
## Q17. CPU 스케줄러의 단계와 목적 
### (1) CPU 스케줄러
S &rarr; 준비 상태 &rarr; 실행 상태 &rarr; 대기상태 &rarr; E

### (2) 스케줄링의 단계
#### ㄱ. 고수준 스케줄링
**부하를 고려하여 시작할지 말지를 결정함.**
- 시스템 내의 전체 작업 수를 조절하는 것
- 어떤 작업을 시스템이 받아들일지 또는 거부할지를 결정
- 시스템 내에서 동시에 실행 가능한 프로세스의 총 개수가 정해짐
- 장기 스케줄링, 작업 스케줄링, 승인 스케줄링이라고도 함

#### ㄴ. 저수준 스케줄링
**실제 작업 수행**
- 어떤 프로세스에 CPU를 할당할지, 어떤 프로세스를 대기상태로 보낼지 등을 결정
- 아주 짧은 시간에 일어남
  - 때문에 단기스케줄링이라고 함

#### ㄷ. 중간 수준 스케줄링
**보류에서 활성화**
- 중지와 활성화로 전체 시스템의 활성화된 프로세스 수를 조절하여 과부하를 막음
- 일부 프로세스를 중지 상태로 옮김으로써 나머지 프로세스가 원만하게 작동하게 지원함.
- 저수준 스케줄링이 원만하게 이루어지도록 완충하는 역할

### (3) 스케줄링의 목적
#### ㄱ. 공평성
- 모든 프로세스가 자원을 공평하게 배정받아야 하며, 자원 배정 과정에서 특정 프로세스가 배정되어선 안됨
#### ㄴ. 효율성
- 시스템 자원이 유휴 시간 없이 사용되도록 스케줄링을 하고, 유휴 자원을 사용하려는 프로세스에는 우선권을 주어야함.
#### ㄷ. 안정성
- 우선순위를 사용하여 중요 프로세스가 먼저 작동하도록 배정함으로써 시스템 자원을 점유하거나 파괴하려는 프로세스로부터 자원을 보호해야함
#### ㄹ. 확장성
- 프로세스가 증가해도 시스템이 안정적으로 작동하도록 조치해야 하며 시스템 자원이 늘어나는 경우 이 혜택이 시스템에 반영되게 해야 함.
#### ㅁ. 반응 시간 보장
- 응답이 없는 경우 사용자는 시스템이 멈춘 것으로 가정하기 때문에 시스템은 적절한 시간 안에 프로세스의 요구에 반응해야함.
#### ㅂ. 무한 연기 방지
- 특정 프로세스의 작업이 무한히 연기되어서는 안됨.

## R18. 스케줄링 시 고려사항
### (1) 선점형 스케줄링과 비선점형 스케줄링
#### ㄱ. 선점형 스케줄링
**정의**: 운영체제가 필요하다고 판단하면 실행 상태에 있는 프로세스의 **작업을 중단시키고** 새로운 작업을 시작할 수 있는 방식
- 하나의 프로세스가 CPU를 독점할 수 없기 때문에 빠른 응답시간을 요구하는 대화형 시스템이나 **시분할 시스템**에 적합
- 대부분 저수준 스케줄러는 선점형 스케줄링 방식을 이용

#### ㄴ. 비선점형 스케줄링
**정의**: 어떤 프로세스가 실행 상태에 들어가 CPU를 사용하면 그 프로세스가 **종료되거나 자발적으로** 대기 상태에 들어가기 전까지는 계속 실행되는 방식
- 선점형 스케줄링보다 스케줄러의 작업량이 적고 문맥 교환에 의한 낭비도 적음
- CPU 사용시간이 긴 프로세스 때문에 CPU 사용시간이 짧은 여러 프로세스가 오랫동안 기다리게 됨
  - 전체 시스템의 처리율이 떨어짐
- 과거의 **일괄 작업 시스템**에서 사용하던 방식

### (2) 프로세스 우선순위
> **커널 프로세스의 우선순위가 일반 프로세스보다 높음**
>- 시스템에는 다양한 우선순위의 프로세스가 공존하며 우선순위가 높은 프로세스가 CPU를 먼저, 더 오래 차지.
>- 시스템에 따라 높은 숫자가 높은 우선순위를 나타내기도 하고, 낮은 숫자가 높은 우선순위를 나타내기도 함.

### (3) CPU 집중 프로세스와 입출력 집중 프로세스
> CPU 집중 프로세스
>- 수학연산과 같이 CPU를 많이 사용하는 프로세스로 CPU 버스트가 많은 프로세스

> 입출력 집중 프로세스
>- 저장장치에서 데이터를 복사하는 일과 같이 입출력을 많이 사용하는 프로세스로 입출력 버스트가 많은 프로세스

- 스케줄링을 할 때 입출력 집중 프로세스의 우선순위를 CPU 집중 프로세스보다 높이면 시스템의 효율이 향상

### (4) 전면 프로세스와 후면 프로세스
> **전면 프로세스**
>- GUI를 사용하는 운영체제에서 화면의 맨 앞에 놓인 프로세스
>- 현재 입력과 출력을 사용하는 프로세스
>- 사용자와 상호작용이 가능하여 상호작용 프로세스라고도 함.

> **후면 프로세스**
>- 사용자와 상호작용이 없는 프로세스
>- 사용자의 입력 없이 작도하기 때문에 일괄 작업 프로세스라고도 함
>- 전면 프로세스의 우선순위가 후면 프로세스보다 높음


---
# 5주차 2교시: 다중 큐, 스케줄링 알고리즘
## S19. 준비 상태와 대기 상태에서 다중 큐
### (1) 준비 상태의 다중 큐
- 프로세스는 준비 상태에 **들어올 때마다** 자신의 우선순위에 해당되는 **큐의 마지막에 삽입**.
- CPU 스케줄러는 우선순위가 가장 높은 큐의 맨 앞에 있는 프로세스 6에 CPU 할당.

### (A) 프로세스의 우선순위를 배정하는 방식
#### ㄱ. 고정 우선순위 방식
**정의**: 한번 정하면 끝까지 감
- 프로세스가 작업하는 동안 우선순위가 변하지 않음.
- 변동에 대처가 어려움

#### ㄴ. 변동 우선순위 방식
**정의**: 우선순위가 변동됨
- 프로세스 생성 시 부여받은 우선순위가 프로세스 작업 중간에 변하는 방식
- 구현하기 어렵지만 시스템의 효율성을 높일 수 있음

### (2) 대기상태의 다중 큐 
**정의**: 시스템의 효율을 높이기 위해 **대기 상태**에서는 **같은 입출력**을 요구한 프로세스끼리 모아놓음.

**다중 큐 비교**  
**준비 큐**: 한 번에 하나의 프로세스를 꺼내어 CPU를 할당  
**대기 큐**: 
- 여러개의 프로세스 제어 블록을 동시에 꺼내어 준비 상태로 옮김
- 대기 큐에서 동시에 끝나는 인터럽트를 처리하기 위해 인터럽트 벡터라는 자료 구조 사용

## T20. 스케줄링 알고리즘 종류
### (1) 스케줄링 알고리즘의 종류
선점 스케줄링
- Round Robin 스케줄링
- SRT, Shortest Remaining time 스케줄링 
- MLQ, Multi lvl Queue 스케줄링
- MFQ, Multi lvl Feedback Queue 스케줄링

비선점 스케줄링
- 우선순위 스케줄링
- 기한부 스케줄링
- FIFO 스케줄링
- SJF, Shortest Job First 스케줄링
- HRN, Highest Response Ratio Next 스케줄링

### (1.A) 스케줄링 알고리즘 평가 기준
#### ㄱ. CPU 사용률
- 전체 시스템의 동작 시간 중 CPU가 사용된 시간을 측정하는 방법
- 가장 이상적인 수치는 100%이지만, 실제로는 여러 가지 이유로 90%도 못미침

#### ㄴ. 처리량
- 단위 시간 당 작업을 마친 프로세스 수

**대기시간**: 프로세스가 생성된 후 실행되기 전까지 대기하는 시간  
**응답시간**: 첫 작업이 시작한 후 첫번쨰 출력이 나오기까지 시간  
**실행시간**: 시작부터 종료까지의 시간  
**반환시간**: 대기부터 실행이 종료될때까지의 시간  
 
### (2) FCFS 스케줄링 동작 방식
- 준비 큐에 도착한 순서대로 CPU를 할당하는 **비선점형 방식**
- 한 번 실행되면 그 프로세스가 끝나야만 다음 프로세스를 실행할 수 있음
- 큐가 **하나**라 모든 프로세스는 우선순위가 동일

### (3) SJF 스케줄링의 동작 방식
- 최단 작업 우선 스케줄링
- 실행시간이 가장 짧은 작업부터 CPU를 할당함
- `콘보이 효과`를 완화하여 시스템의 효율성을 높임

작업 시간이 긴 놈은 아사함.
- 에이징으로 커버(순서 양보할 때마다 점수를 높이는 것)

### (4) HRN
SJF의 아사를 해결하기 위해 만들어짐
- 최고 응답률 우선 알고리즘

우선순위 = (대기시간 + 사용시간) / 사용시간

### (5) 라운드로빈 스케줄링
- 타임슬라이스가 크면 FCFS로 보이는데 
- 타임슬라이스가 작으면 문맥교환에 자원을 다씀

### (6) SRT 스케줄링
- 현재 실행 중인 프로세스와 큐에 있는 프로세스의 남은 시간을 주기적으로 계산하고, 남은 시간이 더 적은 프로세스와 문맥 교환을 해야하므로 SJF 스케줄링에는 없는 작업이 추가됨
- 아사해서 잘 안씀

### (7) 우선순위 스케줄링
- 프로세스의 중요도에 따라 스케줄링을 진행함.

우선순위
- 비선점형, 선점형 방식에 보두 적용이 가능

비선점형 방식
- SJF, HRN

선점형 방식
- SRT 

고정 우선순위 알고리즘 변동 및 우선순위 알고리즘이 있다
### (8) 다단계 큐 스케줄링
- 큐를 여러개 준비하고 큐에따라 우선순위를 부여해서, 그에 맞춘 프로세스를 넣어서 처리함.