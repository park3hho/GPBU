# 4주차 1교시: 관계 데이터 구조 및 릴레이션의 사상(Mapping) 방법
## Y24. 관계 데이터 특성, 릴레이션 용어
### (1) 관계 데이터 구조
- 테이블 형태 구조로 모든 데이터 표현
- 이론적으로는 **수학적인 릴레이션**(mathematical relation)을 기초로 함
- 테이블의 행은 튜플, 열은 애트리뷰트로 표현
- 연산 수행이 한번에 한 행을 접근하는 방식(row at a time)이 아닌 하나의 레코드 집합을 접근하는 방식(set at a time)

애트리뷰트
- 가장 작은 논리적 단위
- 속성의 유일한 식별을 위해 속성의 명칭은 유일

도메인
- 하나의 애트리뷰트가 취할 수 있는 같은 타입의 원자 값들의 집합
- 같은 도메인의 값만 비교 허용

### (2) 릴레이션
#### ㄱ. 릴레이션 R의 수학적 개념
- 테이블에 대한 수학적 용어
  - 차수
    - 릴레이션 **속성**의 수
    - 정적
  - 카디널리티
    - **튜플**의 수
    - 동적

#### ㄴ. 릴레이션의 정의
릴레이션 = 릴레이션 스키마 + 릴레이션 인스턴스

**릴레이션 스키마** = [스킴, 스키마, 내포]: 구조
- 릴레이션 이름 + 애트리뷰트 이름 + 제약 조건
- 릴레이션의 구조를 의미하며 자주 변하지 않는 **정적 성질**을 가짐

**릴레이션 인스턴스** = [인스턴스, 외연]: 값
- 릴레이션의 인스턴스는 어느 한 시점에 릴레이션의 내용(상태)
- 저장된 데이터 전체를 의미(튜플 전체)
- 삽입, 삭제, 갱신으로 자주 내용이 변하는 **동적 성질**을 가짐

## Z25. 릴레이션의 특성
### (1) 특성
#### ㄱ. 튜플의 유일성
- 한 릴레이션에 포함된 튜플은 **모두 상이**
#### ㄴ. 튜플의 무순서성
- 한 릴레이션에 포함된 튜플은 **순서가 없음**
#### ㄷ. 애트리뷰트의 무순서성
- 한 릴레이션을 구성하는 애트리뷰트 사이에는 **순서가 없음**
#### ㄹ. 애트리뷰트의 원자성
- 모든 애트리뷰트 값은 **원자성(atomic value)**

### (2) 릴레이션과 테이블의 차이점
- 테이블 + 수학적 개념 = 릴레이션
- 하나의 릴레이션은 여러가지 형태의 테이블로 표현 가능
- **테이블**은 같은 행을 **중복**해서 가질 수 있음
- **테이블**은 왼쪽에서 오른쪽으로 열들이 **순서가 정해져 있음**.

## A1. 이진 관계성, 순환 관계성의 사상 방법
다룰 내용: ERD를 릴레이션으로 어떻게 변환할 것이냐
### (1) 릴레이션의 사상
고려 사항
- 릴레이션의 제약 조건 준수
  - 일대일, 일대다, 다대다 개념 준수
- mandatory(total), / optional(partial) relation
- 키 무결성 준수
- null value 발생 최소화
- 조인 연산횟수 고려

### (2) 릴레이션의 사상 방법
**이진 관계성**
#### ㄱ. 일대일 관계
- 양쪽 모두 **선택적 참여 관계**는 외래키를 서로 주고 받음
- 한쪽만 **의무적 참여 관계**는 한쪽만 외래키를 제공함.
- 양쪽 모두 **의무적 참여 관계**는 릴레이션을 하나로 합침

#### ㄴ. 일대다 관계
- 일측 기본키를 다측에 외래키로 집어 넣음

#### ㄷ. 다대다 관계
- 중간 테이블을 만들어버림. **복합키**로

**순환 관계성**(Recursive Relationship)
#### ㄱ. 알대다 순환 관계성
- 예시로 직원 테이블에 상사와 부하직원이 둘 다 있는데, 상사가 부하직원의 참조되어야해서.
#### ㄴ. 다대다 순환 관계성
- 중간테이블에 넣어버려, 

**삼진 이상 관계 타입**
#### ㄱ. 삼진이상의 관계 타입
- 삼원 또는 그 이상의 다원 관계성 집합은 **새로운 릴레이션**으로 만듦
- 새로운 릴레이션은 기존 릴레이션의 기본키로 구성
- 기본키는 다측의 기본키로 선정(다측이 여러개면 복합키로)

## B2. 확장 ER모델의 사상 방법, 특수한 속성의 사상 방법
### (1) 일반화, 집단화 관계성 집합의 사상
#### ㄱ. 일반화
- 상위 개체집합의 기본키를 하위개체집합의 기본키로 다시 사용 

#### ㄴ. 집단화
- 집단화 관련 관계를 별도의 릴레이션으로 생성하고 기본키는 복합키로 구성

### (2) 특수한 어트리뷰트/엔티티 타입의 사상
#### ㄱ. 약한 개체 타입
- 약한 개체타입의 식별은 강한 개체타입의 **기본키**와 약한 개체타입의 **부분키**로 식별함

#### ㄴ. 복합 속성
- 개개 속성이 데이터베이스 내에서 중요한 의미를 가지는 경우에는 나눠 표현하고, 전체를 사용할 때에는 복합속성이 아닌 **단순속성**으로 표현

#### ㄷ. 다중값 속성
- 새로운 릴레이션을 만들어, 거기에 보관함 (다중값 속성이란 여러개 가질 수 있는 경우, 예시: 취미)

#### ㄹ. 유도속성
- 넌지시 알 수 있는 속성(예시: 주민번호로 나이 알기)

---
# 4주차 2교시: 관계 데이터 제약
## C3. 슈퍼키, 후보키, 기본키, 대체키
키의 조건  
**유일성**: 이 값으로 튜플 하나가 딱 찍히냐?  
**최소성**: 식별할 때, 속성 값을 더 뺄 수 있냐?

### ㄱ. 슈퍼키
- **유일성**은 갖지만 **최소성**을 만족시키지 못하는 애트리뷰트 집합
- 하나의 키 값으로 하나의 튜플을 유일하게 식별할 수 있는 애트리뷰트들의 집합

### ㄴ. 후보키
- **유일성-최소성** 모두 만족함.

### ㄷ. 기본키
후보키에서 대표로 쓰임

### ㄹ. 대체키
후보키에서 대기 중

## D4. 외래키 특징 및 고려사항
참조 릴레이션과 피참조 릴레이션
- 널 값 가능
- 외래키는 참조한 기본키와 어긋나면 ㅇㅏㄴ됨

### (1) 외래키 고려사항
#### ㄱ. Cascaded Option
- 기본키 삭제 및 수정 시 외래키 튜플 함께 삭제, 수정

#### ㄴ. Nullified Option
- 기본키 삭제 및 갱신 시 외래키 값을 `Null`로 설정

#### ㄷ. Restricted Option
- 외래키 있음 삭제 안댕!

#### ㄹ. Default Option
- 기본키 삭제 및 갱신 시 `default` 값으로 설정


### (2) SQL에서 표현방법
기본키: Primary Key  
대체키: Unique  
외래키: Foreign Key  

참조무결성 제약조건: SET NULL, SET DEFAULT, CASCADE, NO ACTION

## E5. 무결성의 종류(개체, 참조, 도메인, 의미)

개체무결성: 
개체는 Null이 되면 안됨

도메인무결성:
속성이 갖는 값이 일정해야함.

참조무결성: 
참조되야함. 안되면 안됨

의미무결성:
다양한 의미들이 각각에 조건에 맞아야함.